<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<style>
  body { margin:0; padding:16px; background:#0f0f10; color:#eee; font-family:system-ui,sans-serif; }
  h1 { margin:0 0 10px; font-size:18px; }
  .grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; margin-top:12px; }
  .pad { border:1px solid #2a2a2a; border-radius:12px; padding:12px; background:#141414; cursor:pointer; user-select:none; }
  .pad:active { transform: translateY(1px); }
  .meta { opacity:0.7; font-size:12px; }
  .ctrl { margin-top:10px; display:flex; gap:10px; align-items:center; }
  input[type=range]{ width:260px; }
</style>
</head>
<body>
  <h1>SHEAR | Drums</h1>
  <div class="meta">Use the DAW Drum Editor for sequencing. Pads here are for audition.</div>

  <div class="ctrl">
    <label>Master</label>
    <input type="range" min="0" max="1" step="0.001" data-p="master">
  </div>

  <div class="grid" id="pads"></div>

<script>
  const pads = [
    ["Kick", 36], ["Snare", 38], ["HH Closed", 42],
    ["HH Open", 46], ["Tom 1", 48], ["Tom 2", 45],
    ["Floor 1", 41], ["Floor 2", 43], ["Crash", 49], ["Ride", 51]
  ];
  const el = document.getElementById("pads");
  pads.forEach(([name, note]) => {
    const d = document.createElement("div");
    d.className = "pad";
    d.innerHTML = `<div style="font-weight:700">${name}</div><div class="meta">MIDI ${note}</div>`;
    d.onclick = () => parent.postMessage({ type:"midi", note, vel:110, on:true }, "*");
    el.appendChild(d);
  });

  const master = document.querySelector('[data-p="master"]');
  master.addEventListener("input", e => parent.postMessage({ type:"setParam", paramId:"master", value:Number(e.target.value) }, "*"));

  window.addEventListener("message", (e) => {
    const msg = e.data;
    if (msg?.type === "init" || msg?.type === "state") {
      const p = msg?.state?.params || {};
      if (p.master !== undefined) master.value = p.master;
    }
  });
  parent.postMessage({ type:"requestState" }, "*");
</script>
</body>
</html>
